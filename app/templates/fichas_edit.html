{% extends 'base.html' %}
{% block content %}
<h3>Editar Ficha #{{ ficha.id }}</h3>
<form method="post">
  <div class="row g-3">
    <div class="col-md-6">
      <label class="form-label">Veículo</label>
      <input name="veiculo" class="form-control" value="{{ ficha.veiculo }}" required>
    </div>
    <div class="col-md-3">
      <label class="form-label">Placa</label>
      <input name="placa" class="form-control" value="{{ ficha.placa }}" required>
    </div>
    <div class="col-md-3">
      <label class="form-label">Serviço</label>
      <input name="servico" class="form-control" value="{{ ficha.servico }}" required>
    </div>
    <div class="col-md-6">
      <label class="form-label">Se 'Outros', descreva</label>
      <input name="servico_outros" class="form-control" value="{{ ficha.servico_outros or '' }}">
    </div>
    <div class="col-md-6">
      <label class="form-label">Fornecedor (texto)</label>
      <input name="fornecedor" class="form-control" value="{{ ficha.fornecedor or '' }}">
    </div>
    <div class="col-md-3">
      <label class="form-label">Valor</label>
      <input name="valor" type="number" step="0.01" class="form-control" value="{{ ficha.valor or 0 }}">
    </div>
    <div class="col-md-5">
      <label class="form-label">Nome</label>
      <input name="nome" class="form-control" value="{{ ficha.nome or '' }}">
    </div>
    <div class="col-md-4">
      <label class="form-label">CPF</label>
      <input name="cpf" class="form-control" value="{{ ficha.cpf or '' }}">
    </div>
    <div class="col-md-3">
      <label class="form-label">Status</label>
      <select name="status" class="form-select">
        {% for s in ['aberta','concluida','cancelada'] %}
          <option value="{{ s }}" {% if ficha.status==s %}selected{% endif %}>{{ s|capitalize }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="col-12"><hr></div>
    <div class="col-md-3">
      <label class="form-label">CEP</label>
      <input name="endereco_cep" class="form-control" value="{{ ficha.endereco_cep or '' }}">
    </div>
    <div class="col-md-3">
      <label class="form-label">Número</label>
      <input name="endereco_numero" class="form-control" value="{{ ficha.endereco_numero or '' }}">
    </div>
    <div class="col-md-6">
      <label class="form-label">Complemento</label>
      <input name="endereco_complemento" class="form-control" value="{{ ficha.endereco_complemento or '' }}">
    </div>
    <div class="col-md-6">
      <label class="form-label">Celular</label>
      <input name="celular" class="form-control" value="{{ ficha.celular or '' }}">
    </div>
    <div class="col-md-6">
      <label class="form-label">Forma de Pagamento</label>
      <select name="forma_pagamento" class="form-select">
        {% set fp = ficha.forma_pagamento or '' %}
        {% for key, label in [('credito','Crédito'),('debito','Débito'),('pix','Pix'),('dinheiro','Dinheiro'),('a_pagar','A Pagar'),('pago','Pago')] %}
          <option value="{{ key }}" {% if fp==key %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-6">
      <label class="form-label">Nota Fiscal</label>
      <input name="nota_fiscal" class="form-control" value="{{ ficha.nota_fiscal or '' }}">
    </div>

    <div class="col-12">
      <label class="form-label">Observações</label>
      <textarea name="observacoes" class="form-control" rows="3">{{ ficha.observacoes or '' }}</textarea>
    </div>
    <div class="col-12">
      <button class="btn btn-primary">Salvar</button>
    </div>
  </div>
</form>
{% endblock %}
